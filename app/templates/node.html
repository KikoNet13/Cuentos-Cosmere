{% extends "base.html" %}
{% block title %}{{ node_name }} | Biblioteca{% endblock %}
{% block content %}
<nav class="breadcrumbs">
  {% for crumb in breadcrumbs %}
    {% if loop.last %}
      <span>{{ crumb.name }}</span>
    {% else %}
      <a href="{{ url_for('web.dashboard') if crumb.path == '' else url_for('web.node_detail', node_path=crumb.path) }}">{{ crumb.name }}</a>
      <span>/</span>
    {% endif %}
  {% endfor %}
</nav>

<section class="panel">
  <h1>{{ node_name }}</h1>
  <p class="muted">Ruta: <code>{{ node_path }}</code></p>
</section>

<section class="panel">
  <h2>Contenido</h2>
  {% if children %}
    <div class="list-grid">
      {% for item in children %}
        <article class="item-card">
          {% if item.is_story_leaf %}
            <h3>
              <a href="{{ url_for('web.story_detail', story_path=item.path_rel) }}">{{ item.nombre }}</a>
            </h3>
            <p class="muted">Cuento</p>
          {% else %}
            <h3>
              <a href="{{ url_for('web.node_detail', node_path=item.path_rel) }}">{{ item.nombre }}</a>
            </h3>
            <p class="muted">Nodo</p>
          {% endif %}
          <p><code>{{ item.path_rel }}</code></p>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">No hay nodos hijos.</p>
  {% endif %}
</section>
{% endblock %}
